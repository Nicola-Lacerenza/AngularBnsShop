<form [formGroup]="productForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
  <div>
    <label for="images">Immagini del prodotto</label>
    <input type="file" id="images" (change)="onImageChange($event)" multiple accept="image/*" />
    <div *ngIf="submitted && productForm.get('images')?.errors">
      <small class="error">Seleziona almeno un\'immagine.</small>
    </div>
  </div>

  <div>
    <label for="modelName">Nome Modello</label>
    <input id="modelName" formControlName="modelName" type="text" />
    <div *ngIf="submitted && productForm.get('modelName')?.errors">
      <small class="error">Il nome del modello è richiesto.</small>
    </div>
  </div>

  <div>
    <label for="modelDescription">Descrizione Modello</label>
    <textarea id="modelDescription" formControlName="modelDescription"></textarea>
  </div>

  <div>
    <label for="brandName">Nome Brand</label>
    <input id="brandName" formControlName="brandName" type="text" />
    <div *ngIf="submitted && productForm.get('brandName')?.errors">
      <small class="error">Il nome del brand è richiesto.</small>
    </div>
  </div>

  <div>
    <label for="brandDescription">Descrizione Brand</label>
    <textarea id="brandDescription" formControlName="brandDescription"></textarea>
  </div>

  <div>
    <label for="category">Categoria</label>
    <input id="category" formControlName="category" type="text" />
    <div *ngIf="submitted && productForm.get('category')?.errors">
      <small class="error">La categoria è richiesta.</small>
    </div>
  </div>

  <div>
    <label for="color">Colore</label>
    <input id="color" formControlName="color" type="text" />
    <div *ngIf="submitted && productForm.get('color')?.errors">
      <small class="error">Il colore è richiesto.</small>
    </div>
  </div>

  <div>
    <label for="price">Prezzo</label>
    <input id="price" formControlName="price" type="number" step="0.01" />
    <div *ngIf="submitted && productForm.get('price')?.errors">
      <small class="error">Inserisci un prezzo valido.</small>
    </div>
  </div>

  <div>
    <label for="publishStatus">
      <input id="publishStatus" formControlName="publishStatus" type="checkbox" />
      Pubblica sul sito e-commerce
    </label>
  </div>

  <div formArrayName="sizes">
    <label>Taglie e Quantità</label>
    <div *ngFor="let size of sizes.controls; let i = index" [formGroupName]="i">
      <input placeholder="Taglia" formControlName="size" type="text" />
      <input placeholder="Quantità" formControlName="quantity" type="number" min="0" />
      <button type="button" (click)="removeSize(i)" [disabled]="sizes.length === 1">Rimuovi</button>
      <div *ngIf="submitted && size.get('size')?.errors">
        <small class="error">La taglia è richiesta.</small>
      </div>
      <div *ngIf="submitted && size.get('quantity')?.errors">
        <small class="error">La quantità deve essere almeno 0.</small>
      </div>
    </div>
    <button type="button" (click)="addSize()">Aggiungi Taglia</button>
  </div>

  <button type="submit">Inserisci Prodotto</button>
</form>
